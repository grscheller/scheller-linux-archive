#!/bin/bash
#
# Drill down through $PATH to look for files or directories.
# Like the ksh builtin whence, except it does not stop
# after finding the first instance.  Handles spaces in file names 
# and directories on $PATH.  Also shell patterns supported.
#
# Usage: digpath file1 file2 ...
#        digpath 'pattern'
#

shopt -s extglob   # Turn on extended pattern matching
IFS=':'

((ii = 0))
for File in "$@"
do
   for Dir in $PATH
   do
      if [[ -d "$Dir" ]]
      then
          for match in $Dir/$File
          do
              [[ -f $match ]] && FileList[((ii++))]="$match"
              [[ -d $match ]] && FileList[((ii++))]="$match/"
          done
      fi
   done
done

printf '%s\n' "${FileList[@]}"

if ((${#FileList[@]} > 0))
then
    exit 0
else
    exit 1
fi
