I wrote this guide to document what I did to get
Haskell Stack installed on my work computer, a
CentOS 6.8 workstation where I do not have root
privillages.  The GHC Stack people must think
everyone has root privileges.

The stack command itself will be install into
your home directory.

I am assuming that stack is not already installed on
your system and you do not have the necessary root
privaledges to do so as per the official Haskell Stack
website - https://docs.haskellstack.org/en/stable/README/

This guide should be useful for other flavors of
Linux, but there are additional CentOS 6.8 issues.
The stack version that gets installed, 1.3.2+, will not
work with the native version of GCC that comes with
CentOS 6.8.  It only works on systems that I have
locally built and installed a more recent version of
the GCC GNU Compiler Chain.  The "stack setup" command
will fail with the native GCC that comes with CentOS 6.8.

  $ ~/local/bin/gcc --version
  gcc (GCC) 4.9.3 20150310 (prerelease) <- Works!

  $ /usr/bin/gcc --version
  gcc (GCC) 4.4.7 20120313 (Red Hat 4.4.7-17) <- Does not work!


To install, do the following as a regular user:

1. If you are behind a corporate firewall, make sure your
   proxy settings are set up correctly for commandline use

     $ export http_proxy='Kprs-wg-001:9090'
     $ export https_proxy='Kprs-wg-001:9090'

   adjust your proxy settings accordingly.

2. If they don't already exist, create the following directories

     $ mkdir ~/.local/bin
     $ mkdir ~/local/bin

3. Put ~/.local/bin and ~/local/bin on your PATH.  The former is
   the default location where "stack install" installs executables. 
   The later is where we will be installing stack itself.

4. Download and save the install script

     $ curl -sSL https://get.haskellstack.org/ > stackInstall.sh
     $ chmod 700 stackInstall.sh

5. Edit stackInstall.sh:

   1. Change line
        USR_LOCAL_BIN="/usr/local/bin"
      to
        USR_LOCAL_BIN="$HOME/local/bin"

   2. For CentOS/Redhat, in function has_yum(), change line
        has_cmd yum
      to
        has_cmd yummmmmmmmmmm

      Adjust for the function corresponding to your
      Linux distribution.

   3. In the install_from_bindist() function, remove sudocmd from line
        sudocmd install -c -o 0 -g 0 -m 0755 "$STACK_TEMP_DIR"/*/stack "$USR_LOCAL_BIN/stack"

   4. In the sudocmd() function, change the line
        $(command -v sudo) "$@"
      to
        $(command -v echo) "$@"

6. Do the command

     $ ./stackInstall.sh

   and stack will be installed to ~/local/bin.  Script will complain
   that it can't change ownership of stack command.

7. Fix the file permissions

     $ chmod 750 ~/local/bin/stack

8. Setup local GHC sandbox

     $ stack setup

   this may take a while.

9. Now test the stack command

     $ stack ghci

